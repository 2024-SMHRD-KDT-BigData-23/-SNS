![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/109597157/63c09f54-d671-44a1-b99e-b817b58d32f5)![logo](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/11ed9899-7b2c-434c-b5d9-e954ca9f09e6)

### 기온과 계절 정보를 활용하여 사용자들에게 다양한 패션을 제공하는 소셜 네트워크 서비스(SNS)
### 팀명 : TGK(teamGaeko)

</br>

## 1. 제작 기간 & 참여 인원

### 2024년 3월 18일 ~ 4월 2일  

**정연재** : PM / Back, Front   
> 프로젝트 관리, 기상청 API 날씨 위젯, 웹소켓 실시간 채팅   

 **김동현** : Back / DB   
> 프로젝트 구조화, DB설계, 게시글 상세보기, 댓글, 프로필   

 **박종현** : Front   
> 게시글 작성, 해시태그, 주소 API   

 **엄희수** : Front   
> 프론트 개발, UI & UX 디자인, 시연페이퍼, 시연영상   

 **이동주** : 크롤링, DB / Back   
> 데이터 크롤링, 로그인, 회원가입, 문서 및 PPT 제작   

</br>

## 2. 사용 기술
#### `Back-end`
<img src="https://img.shields.io/badge/Java-007396?style=for-the-badge&logo=java&logoColor=white"/> <img src="https://img.shields.io/badge/JSP,Servlet-20232a.svg?style=for-the-badge&logo=jsp&logoColor=61DAFB" />   
<img src="https://img.shields.io/badge/apachemaven-C71A36.svg?style=for-the-badge&logo=apachemaven&logoColor=#C71A36" />
<img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=MySQL&logoColor=white"/>
<img src="https://img.shields.io/badge/Apache Tomcat 9.0-D22128?style=for-the-badge&logo=Apache Tomcat&logoColor=white"/>

#### `Front-end`
<img src="https://img.shields.io/badge/HTML-E34F26?style=for-the-badge&logo=html5&logoColor=white"> <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black"> <img src="https://img.shields.io/badge/CSS-1572B6?style=for-the-badge&logo=css3&logoColor=white">   
<img src="https://img.shields.io/badge/BootStrap-7952B3?style=for-the-badge&logo=BootStrap&logoColor=white"/> <img src="https://img.shields.io/badge/jquery-0769AD?style=for-the-badge&logo=jquery&logoColor=#0769AD"/>

#### `IDE`
<img src="https://img.shields.io/badge/Eclipse-2C2255?style=for-the-badge&logo=Eclipse&logoColor=white"/> <img src="https://img.shields.io/badge/VSCode-007ACC?style=for-the-badge&logo=VisualStudioCode&logoColor=white"/> <img src="https://img.shields.io/badge/Jupyter-F37626?style=for-the-badge&logo=Jupyter&logoColor=white"/>

#### `Etc`
<img src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white"/> <img src="https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=Git&logoColor=white"/> <img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white"/> <img src="https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=Figma&logoColor=white"/> <img src="https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=#000000"/> <img src="https://img.shields.io/badge/AQuery-20232a.svg?style=for-the-badge&logo=aquery&logoColor=61DAFB" />

</br>

## 3. 프로젝트 소개
> 팀개코(TGK)의 WeatherFit은 날씨의 Weather와 패션 용어이면서 적합한의 의미를 가지고 있는 Fit의 합성어로 날씨에 적합한 패션을 추천한다의 의미를 가지고 있습니다.

<details>
<summary><b>3.1. 프로젝트 제안 배경 및 필요성</b></summary>

<div markdown="1">

### 1. 소셜 네트워크 서비스 (SNS) 이용 증가
![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/b37ad1e2-0a3c-4e71-b456-a16c81f2ca44)
출처:정보통신정책연구원

### 2. 패션에 대한 사람들의 관심 증가
![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/70890c65-fd1d-49b8-9036-1528b0e4d3ea)
출처:한국패션소비시장

### 3. 매일 변화하는 날씨에 따른 적절한 옷 선택의 어려움
![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/a35fc8d6-fb39-46d6-8bae-255c7137e361)

</div>
</details>

<details>
<summary><b>3.2. WeatherFit만의 차별성</b></summary>

<div markdown="1">

### :pushpin: 기상청 날씨 API를 활용하여 사용자 위치에 따른 기온을 게시글에 등록하여 사용자들끼리 날씨에 적당한 패션 코디를 주고 받을 수 있음!
![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/27797602-925a-4873-b209-e059151c04b4)

### :pushpin: 패션을 잘 모르는 사람들도 참고할 수 있도록 무신사 패션 코디 사진을 계절별로 분류하여 추천 게시글을 제공함!
![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/3553dfa0-feae-4b67-903d-c4f252cdcfc0)

</div>
</details>

<details>
<summary><b>3.3. 프로젝트 기능</b></summary>

<div markdown="1">

### :pushpin: 로그인, 로그아웃, 회원가입, 정보수정, 회원탈퇴
- 기본적인 기능
- 다음 주소 API 사용
### :pushpin: 날씨 위젯
- Geolocation API를 사용해 사용자 현재 위치 가져오기
- 기상청 단기예보 API를 사용해 사용자 위치에 맞는 날씨 정보를 가져옴
### :pushpin: 게시글 작성, 수정, 삭제
- 이미지 첨부 시 이미지 미리보기
- 기온 등록 체크박스를 통해 게시글에 현재 날씨 정보를 등록할건지에 대해 판별
### :pushpin: 사용자 게시글 확인
- 등록한 기온 표기
### :pushpin: 게시글 상세보기
- 게시글 작성자와의 채팅방 생성
- 댓글 작성
### :pushpin: 무신사 코디 사진 추천
- 파이썬 Requests, Selenium을 사용한 크롤링
- 태그의 계절 정보를 활용해 분류
### :pushpin: 채팅
- 사용자 아이디 입력을 통해 채팅방 생성 후 실시간 채팅 가능
### :pushpin: 사용자 프로필
- 프로필 이미지, 닉네임, 소개글 작성
- 사용자별 작성한 게시글 확인

</div>
</details>

## 4. ERD 설계
![](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/86634da8-afa4-4bc0-b26f-e5b435ad16bb)

## 5. 핵심 기능

> 이 서비스의 핵심 기능은 날씨 위젯의 정보를 활용하여 사용자가 작성한 게시글에 기온이 등록된다는 것입니다.   

> 사용자는 게시글 작성에서 기온 등록을 체크함으로써 실시간 기온을 게시글에 작성할 수 있고,   
> 과거의 사진을 올리고 싶다거나 기온과 관련없는 게시글을 올리고 싶은 경우 기온 등록 체크해제함으로써 게시글을 작성할 수 있습니다.   

> 사용자는 기온이 등록된 게시글을 보고 패션을 참고할 수 있고, 의류 정보나 기온에 적합한지에 대한 궁금증을 1:1 채팅을 통해 해결할 수 있습니다.

<details>
<summary><b>핵심 기능 설명 펼치기</b></summary>
<div markdown="1">

### 5.1. 전체 흐름
![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/0bf7f35c-2122-4ed1-b41b-c9f45c07024e)

### 5.2. 사용자 요청
![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/b8851469-20c3-4a45-b4bd-ab19e6e7fafa)

- **요청이 들어온 URL을 확인** :pushpin: [코드 확인]
- ![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/109597157/ddb65b5f-7698-4d60-a72a-6646a02e860b)

  -  모든 URL이 끝나는 부분을 .do 와 .ajax로 통합하여 각 URL들이 어떤 기능들을 원하는지 분류하고,
  - Controller를 통해서만 접근할 수 있도록 설계. 다른 방법으로 접근하게 되면 에러를 띄움

- **Axios 비동기 요청** :pushpin: [코드 확인]()
  - URL의 모양새인 경우, 컨텐츠를 등록하는 POST 요청을 비동기로 날립니다.

### 5.3. Controller

![](https://zuminternet.github.io/images/portal/post/2019-04-22-ZUM-Pilot-integer/flow_controller.png)

- **요청 처리** :pushpin: [코드 확인](https://github.com/2023-SMHRD-KDT-IOT-4/Repo/blob/94e1b3a93c48cc3fdb51d4468de151930705faa6/Middle_project12/src/main/webapp/WEB-INF/views/BoardContent.jsp#L20)
  - Controller에서는 요청을 화면단에서 넘어온 요청을 받고, Service 계층에 로직 처리를 위임합니다.

- **결과 응답** :pushpin: [코드 확인]()
  - Service 계층에서 넘어온 로직 처리 결과(메세지)를 화면단에 응답해줍니다.

### 5.4. Service

![](https://zuminternet.github.io/images/portal/post/2019-04-22-ZUM-Pilot-integer/flow_service1.png)

- **Http 프로토콜 추가 및 trim()** :pushpin: [코드 확인]()
  - 사용자가 URL 입력 시 Http 프로토콜을 생략하거나 공백을 넣은 경우,  
  올바른 URL이 될 수 있도록 Http 프로토콜을 추가해주고, 공백을 제거해줍니다.

- **URL 접속 확인** :pushpin: [코드 확인]()
  - 화면단에서 모양새만 확인한 URL이 실제 리소스로 연결되는지 HttpUrlConnection으로 테스트합니다.
  - 이 때, 빠른 응답을 위해 Request Method를 GET이 아닌 HEAD를 사용했습니다.
  - (HEAD 메소드는 GET 메소드의 응답 결과의 Body는 가져오지 않고, Header만 확인하기 때문에 GET 메소드에 비해 응답속도가 빠릅니다.)

  ![](https://zuminternet.github.io/images/portal/post/2019-04-22-ZUM-Pilot-integer/flow_service2.png)

- **Jsoup 이미지, 제목 파싱** :pushpin: [코드 확인]()
  - URL 접속 확인결과 유효하면 Jsoup을 사용해서 입력된 URL의 이미지와 제목을 파싱합니다.
  - 이미지는 Open Graphic Tag를 우선적으로 파싱하고, 없을 경우 첫 번째 이미지와 제목을 파싱합니다.
  - 컨텐츠에 이미지가 없을 경우, 미리 설정해둔 기본 이미지를 사용하고, 제목이 없을 경우 생략합니다.


### 5.5. Repository

![](https://zuminternet.github.io/images/portal/post/2019-04-22-ZUM-Pilot-integer/flow_repo.png)

- **컨텐츠 저장** :pushpin: [코드 확인]()
  - URL 유효성 체크와 이미지, 제목 파싱이 끝난 컨텐츠는 DB에 저장합니다.
  - 저장된 컨텐츠는 다시 Repository - Service - Controller를 거쳐 화면단에 송출됩니다.

</div>
</details>

</br>

## 6. 트러블 슈팅

<details>
<summary><b>6.1. 기획의 불안정</b></summary>   
<div markdown="1">
    
- 처음에는 날씨 API를 활용해 날씨의 변화에 맞춰 사용자마다 코디를 실시간으로 추천해주는 서비스를 기획했기에 tb_fashion, tb_weather 테이블 두개를 설계했습니다.

![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/2b76f9aa-cb10-4ff3-89dc-49aac339a149)
  
- 하지만, 저희의 기술적인 한계로 인해 tb_fashion, tb_weather 테이블 대신 tb_crawling 테이블을 만들어 크롤링한 데이터를 계절별로만 나누어 추천했습니다.
  
![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/7f4b18fb-f2e5-4724-ba62-6f950b5b07b8)

</div>
</details>

<details>
<summary><b>6.2. 구현 과정 중 생긴 의견 단합</b></summary>   
<div markdown="1">
    
- 구현 단계로 들어서기 전 피그마로 전체적인 UI/UX를 구성하였습니다.
   
![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/b01f87b2-fe21-4119-980a-f3b569ecb2b6)

- 하지만, 구현 단계로 들어서서 피그마로 구성한 UI/UX에서 세밀한 부분은 사용자의 편의성에 맞추어 바꿔야 할 필요가 있었기 때문에 짧은 기간 동안 빠른 의견 전달을 위해 그림판, 노트 등의 시각화하는 방법으로 회의를 진행하였습니다.

![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/9d44c9df-2a3a-48a5-a200-0bdb45e133e2)

</div>
</details>

<details>
<summary><b>6.3. Git & GitHub</b></summary>   
<div markdown="1">
    
- 처음 배워서 사용해보는 Git이었기에 프로젝트 기간 초반에 Git을 사용해보면서 공부하는 것에 시간을 많이 사용했습니다.   

- 심지어 팀 한명의 파일이 전부 날아가는 사태도 일어났습니다.   

![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/10db11c4-3682-4e7d-bd58-ef58961ffd9a)

- GitHub Desktop을 이용해 Git을 UI로 보여주는 소프트웨어를 사용했고, 매일 팀원과 시간을 맞추어 Git push & pull을 하여 충돌을 방지했습니다.   

![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/1153595b-86ca-4719-8135-ceeeb4539edc)

</div>
</details>

<details>
<summary><b>6.4. WebSocket 채팅방</b></summary>   
<div markdown="1">
    
- 1:1 실시간 채팅을 위해 WebSocket을 구현하는 도중 채팅방을 통해 사용자 2명을 이어주는 것에 대해 어려움이 있었습니다.

- @ServerEndpoint 어노테이션을 사용해 사용자가 속해있는 roomIdx를 이어줌으로써 채팅기능을 해결하였습니다.

![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/a65509cb-aecd-46db-b48d-2248b7668b8e)

</div>
</details>

<details>
<summary><b>6.5. Modal의 충돌</b></summary>
<div markdown="1">
  
- 프로젝트에 한 페이지 안에서 여러 모달을 사용해야만 했습니다.

- HTML5의 모달을 구현하여 모달마다 showModal(), removeModal() 함수를 호출해주어야 했지만, showModal(), removeModal() 함수를 호출할 때 다른 js 코드들이 작동하지 않는 문제가 발생했습니다.

![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/0ddf8321-002c-4e93-b165-363ca1b853b9)

- 부트스트랩의 data-bs-toggle, data-bs-target 속성을 사용해 모달의 충돌이 일어나는 것을 방지할 수 있었고, 유지보수하기에도 용이해 부트스트랩을 공부하여 해결하였습니다.

![image](https://github.com/2024-SMHRD-KDT-BigData-23/WeatherFit/assets/76952340/4ba78611-865e-41cc-bd2d-871fad0c61bc)

</div>
</details>
